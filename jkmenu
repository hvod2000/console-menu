#!/bin/bash
# -*- coding: UTF-8 -*-
# sharp s: ÃŸ

print() {
	printf "$1" >> /dev/tty
}
print "\e[?25l\e[2J"
declare -i cur
opts=$(</dev/stdin) len=`echo "$opts" | wc -l` cur=1
print "\e[H`sed $'s/$/\E[K/g; s/^/  /g'<<<$opts`\e[${cur}H>"
while read -sN1 char; do
	test "$char" = j && cur=$cur%$len+1
	test "$char" = k && cur=($cur+$len-2)%$len+1
	test "$char" = q && print "\ec" && exit 1
	test "$char" = l || test "$char" = h && break
	print "\b \e[${cur}H>"
done </dev/tty
print "\ec"
echo "$opts" | sed -n ${cur}p
